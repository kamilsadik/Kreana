{"ast":null,"code":"var _jsxFileName = \"/Users/kamilalizaisadik/DeFi/Dynamic Automated Market Maker/CreatorTokenExchange/client/src/OwnerDashboard.jsx\";\nimport React, { Component, useState, useEffect } from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { tokens } from \"./Inventory.jsx\"; // These imports are needed to implement Web3, and to connect the React client to the Ethereum server\n\nimport Web3 from './web3';\nimport { ABI } from './ABI';\nimport { contractAddr } from './Address';\nconst web3 = new Web3(Web3.givenProvider); // Contract address is provided by Truffle migration\n\nconst ContractInstance = new web3.eth.Contract(ABI, contractAddr);\n\nconst OwnerDashboard = () => {\n  async function handleWithdraw(e) {\n    e.preventDefault();\n    const accounts = await window.ethereum.enable();\n    const account = accounts[0];\n    const gas = await ContractInstance.methods.withdraw(account).estimateGas({\n      from: account\n    });\n    const result = await ContractInstance.methods.withdraw(account).send({\n      from: account,\n      gas: gas\n    });\n    console.log(result);\n  }\n\n  async function getTotalPlatformFees() {\n    const totalPlatformFees = await ContractInstance.methods.totalPlatformFees().call();\n    return totalPlatformFees;\n  }\n\n  const [totalPlatformFees, setTotalPlatformFees] = useState(0);\n  useEffect(() => {\n    async function fetchData() {\n      setTotalPlatformFees(await getTotalPlatformFees());\n    }\n\n    fetchData();\n  }, []);\n\n  async function getPlatformFeesOwed() {\n    const platformFeesOwed = await ContractInstance.methods.platformFeesOwed().call();\n    return platformFeesOwed;\n  }\n\n  const [platformFeesOwed, setPlatformFeesOwed] = useState(0);\n  useEffect(() => {\n    async function fetchData() {\n      setPlatformFeesOwed(await getPlatformFeesOwed());\n    }\n\n    fetchData();\n  }, []); // Initalize open/closed state for platform fee payout dialog\n\n  const [payoutPlatformFeeOpen, setPayoutPlatformFeeOpen] = React.useState(false);\n\n  const handleClickPayoutPlatformFeeOpen = () => {\n    setPayoutPlatformFeeOpen(true);\n  };\n\n  const handlePayoutPlatformFeeClose = () => {\n    setPayoutPlatformFeeOpen(false);\n  };\n\n  async function handlePayoutPlatformFees(e) {\n    e.preventDefault();\n    const accounts = await window.ethereum.enable();\n    const account = accounts[0];\n    const gas = await ContractInstance.methods.payoutPlatformFees(account).estimateGas({\n      from: account\n    });\n    const result = await ContractInstance.methods.payoutPlatformFees(account).send({\n      from: account,\n      gas: gas\n    });\n    console.log(result);\n    handlePayoutPlatformFeeClose();\n  }\n\n  async function handleChangePlatformFee(e, newFee) {\n    e.preventDefault();\n    const accounts = await window.ethereum.enable();\n    const account = accounts[0];\n    const gas = await ContractInstance.methods.changePlatformFee(newFee).estimateGas({\n      from: account\n    });\n    const result = await ContractInstance.methods.changePlatformFee(newFee).send({\n      from: account,\n      gas: gas\n    });\n    console.log(result);\n  }\n\n  async function handleChangeProfitMargin(e, newProfitMargin) {\n    e.preventDefault();\n    const accounts = await window.ethereum.enable();\n    const account = accounts[0];\n    const gas = await ContractInstance.methods.changeProfitMargin(newProfitMargin).estimateGas({\n      from: account\n    });\n    const result = await ContractInstance.methods.changeProfitMargin(newProfitMargin).send({\n      from: account,\n      gas: gas\n    });\n    console.log(result);\n  }\n\n  const [currToken, setCurrToken] = React.useState(0); // Initalize open/closed state for verification dialog\n\n  const [verificationOpen, setVerificationOpen] = React.useState(false);\n\n  const handleClickVerificationOpen = () => {\n    setVerificationOpen(true);\n  };\n\n  const handleVerificationClose = () => {\n    setVerificationOpen(false);\n  }; // For simplicity, right now calling this automatically sets verification status to true\n\n\n  async function handleChangeVerification(e, creatorTokenId) {\n    e.preventDefault();\n    const accounts = await window.ethereum.enable();\n    const account = accounts[0];\n    const gas = await ContractInstance.methods.changeVerification(creatorTokenId, true).estimateGas({\n      from: account\n    });\n    const result = await ContractInstance.methods.changeVerification(creatorTokenId, true).send({\n      from: account,\n      gas: gas\n    });\n    console.log(result);\n    handleVerificationClose();\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 3\n    }\n  }, \"Total Platform Fees Generated: \", totalPlatformFees / 1000000000000000000, \" ETH\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 78\n    }\n  }), \"Platform Fees Yet To Be Withdrawn: \", platformFeesOwed / 1000000000000000000, \" ETH\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 81\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 87\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"outlined\",\n    color: \"primary\",\n    onClick: handleClickPayoutPlatformFeeOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 4\n    }\n  }, \"Payout Platform Fees\"), /*#__PURE__*/React.createElement(Dialog, {\n    open: payoutPlatformFeeOpen,\n    onClose: handlePayoutPlatformFeeClose,\n    \"aria-labelledby\": \"form-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    id: \"form-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 6\n    }\n  }, \"Confirm platform fee payout.\"), /*#__PURE__*/React.createElement(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(DialogContentText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 8\n    }\n  }, \"Payout \", platformFeesOwed / 1000000000000000000, \" ETH\")), /*#__PURE__*/React.createElement(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: handlePayoutPlatformFeeClose,\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 8\n    }\n  }, \"Cancel\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: e => handlePayoutPlatformFees(e),\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 8\n    }\n  }, \"Confirm\"))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"outlined\",\n    color: \"primary\",\n    onClick: handleClickVerificationOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 4\n    }\n  }, \"Verify a Token\"), /*#__PURE__*/React.createElement(Dialog, {\n    open: verificationOpen,\n    onClose: handleVerificationClose,\n    \"aria-labelledby\": \"form-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    id: \"form-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 6\n    }\n  }, \"Verify Token\"), /*#__PURE__*/React.createElement(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(DialogContentText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 8\n    }\n  }, \"Which token do you wish to verify?\"), /*#__PURE__*/React.createElement(TextField, {\n    autoFocus: true,\n    margin: \"dense\",\n    id: \"name\",\n    label: \"Token\",\n    placeholder: \"0\",\n    type: \"number\",\n    fullWidth: true,\n    onChange: event => {\n      setCurrToken(event.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 8\n    }\n  })), /*#__PURE__*/React.createElement(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: handleVerificationClose,\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 8\n    }\n  }, \"Cancel\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: e => handleChangeVerification(e, currToken),\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 8\n    }\n  }, \"Verify\"))));\n};\n\nexport default OwnerDashboard;","map":{"version":3,"sources":["/Users/kamilalizaisadik/DeFi/Dynamic Automated Market Maker/CreatorTokenExchange/client/src/OwnerDashboard.jsx"],"names":["React","Component","useState","useEffect","Button","TextField","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","tokens","Web3","ABI","contractAddr","web3","givenProvider","ContractInstance","eth","Contract","OwnerDashboard","handleWithdraw","e","preventDefault","accounts","window","ethereum","enable","account","gas","methods","withdraw","estimateGas","from","result","send","console","log","getTotalPlatformFees","totalPlatformFees","call","setTotalPlatformFees","fetchData","getPlatformFeesOwed","platformFeesOwed","setPlatformFeesOwed","payoutPlatformFeeOpen","setPayoutPlatformFeeOpen","handleClickPayoutPlatformFeeOpen","handlePayoutPlatformFeeClose","handlePayoutPlatformFees","payoutPlatformFees","handleChangePlatformFee","newFee","changePlatformFee","handleChangeProfitMargin","newProfitMargin","changeProfitMargin","currToken","setCurrToken","verificationOpen","setVerificationOpen","handleClickVerificationOpen","handleVerificationClose","handleChangeVerification","creatorTokenId","changeVerification","event","target","value"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect } from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { tokens } from \"./Inventory.jsx\";\n// These imports are needed to implement Web3, and to connect the React client to the Ethereum server\nimport Web3 from './web3';\nimport { ABI } from './ABI';\nimport { contractAddr } from './Address';\n\nconst web3 = new Web3(Web3.givenProvider);\n// Contract address is provided by Truffle migration\nconst ContractInstance = new web3.eth.Contract(ABI, contractAddr);\n\nconst OwnerDashboard = () => {\n\n  async function handleWithdraw(e) {\n    e.preventDefault();    \n    const accounts = await window.ethereum.enable();\n    const account = accounts[0];\n    const gas = await ContractInstance.methods.withdraw(account).estimateGas({\n      from: account,\n    });\n    const result = await ContractInstance.methods.withdraw(account).send({\n      from: account,\n      gas: gas\n    })\n    console.log(result);\n  }\n\n  async function getTotalPlatformFees() {\n  \tconst totalPlatformFees = await ContractInstance.methods.totalPlatformFees().call();\n  \treturn(totalPlatformFees);\n  }\n\n  const [totalPlatformFees, setTotalPlatformFees] = useState(0);\n  useEffect(() => {\n    async function fetchData() {\n      setTotalPlatformFees(await getTotalPlatformFees());\n    }\n    fetchData();\n  }, []);\n\n  async function getPlatformFeesOwed() {\n  \tconst platformFeesOwed = await ContractInstance.methods.platformFeesOwed().call();\n  \treturn(platformFeesOwed);\n  }\n\n  const [platformFeesOwed, setPlatformFeesOwed] = useState(0);\n  useEffect(() => {\n    async function fetchData() {\n      setPlatformFeesOwed(await getPlatformFeesOwed());\n    }\n    fetchData();\n  }, []);\n\n  // Initalize open/closed state for platform fee payout dialog\n  const [payoutPlatformFeeOpen, setPayoutPlatformFeeOpen] = React.useState(false);\n  const handleClickPayoutPlatformFeeOpen = () => {\n    setPayoutPlatformFeeOpen(true);\n  };\n  const handlePayoutPlatformFeeClose = () => {\n    setPayoutPlatformFeeOpen(false);\n  }\n\n  async function handlePayoutPlatformFees(e) {\n    e.preventDefault();    \n    const accounts = await window.ethereum.enable();\n    const account = accounts[0];\n    const gas = await ContractInstance.methods.payoutPlatformFees(account).estimateGas({\n      from: account,\n    });\n    const result = await ContractInstance.methods.payoutPlatformFees(account).send({\n      from: account,\n      gas: gas\n    })\n    console.log(result);\n    handlePayoutPlatformFeeClose();\n  }\n\n  async function handleChangePlatformFee(e, newFee) {\n    e.preventDefault();    \n    const accounts = await window.ethereum.enable();\n    const account = accounts[0];\n    const gas = await ContractInstance.methods.changePlatformFee(newFee).estimateGas({\n      from: account,\n    });\n    const result = await ContractInstance.methods.changePlatformFee(newFee).send({\n      from: account,\n      gas: gas\n    })\n    console.log(result);\n  }\n\n  async function handleChangeProfitMargin(e, newProfitMargin) {\n    e.preventDefault();    \n    const accounts = await window.ethereum.enable();\n    const account = accounts[0];\n    const gas = await ContractInstance.methods.changeProfitMargin(newProfitMargin).estimateGas({\n      from: account,\n    });\n    const result = await ContractInstance.methods.changeProfitMargin(newProfitMargin).send({\n      from: account,\n      gas: gas\n    })\n    console.log(result);\n  }\n\n  const [currToken, setCurrToken] = React.useState(0);\n\n  // Initalize open/closed state for verification dialog\n  const [verificationOpen, setVerificationOpen] = React.useState(false);\n  const handleClickVerificationOpen = () => {\n    setVerificationOpen(true);\n  };\n  const handleVerificationClose = () => {\n    setVerificationOpen(false);\n  }\n\n  // For simplicity, right now calling this automatically sets verification status to true\n  async function handleChangeVerification(e, creatorTokenId) {\n    e.preventDefault();    \n    const accounts = await window.ethereum.enable();\n    const account = accounts[0];\n    const gas = await ContractInstance.methods.changeVerification(creatorTokenId, true).estimateGas({\n      from: account,\n    });\n    const result = await ContractInstance.methods.changeVerification(creatorTokenId, true).send({\n      from: account,\n      gas: gas\n    })\n    console.log(result);\n    handleVerificationClose();\n  }\n\n\treturn (\n\t\t<div>\n\n\t\t\tTotal Platform Fees Generated: {totalPlatformFees/1000000000000000000} ETH<br />\n\t\t\tPlatform Fees Yet To Be Withdrawn: {platformFeesOwed/1000000000000000000} ETH<br /><br />\n\n\t\t\t<Button variant=\"outlined\" color=\"primary\" onClick={handleClickPayoutPlatformFeeOpen}>\n\t\t\t  Payout Platform Fees\n\t\t\t</Button>\n\t\t\t<Dialog\n\t\t\topen={payoutPlatformFeeOpen}\n\t\t\tonClose={handlePayoutPlatformFeeClose}\n\t\t\taria-labelledby=\"form-dialog-title\">\n\t\t\t  <DialogTitle id=\"form-dialog-title\">\n\t\t\t  Confirm platform fee payout.\n\t\t\t  </DialogTitle>\n\t\t\t  <DialogContent>\n\t\t\t    <DialogContentText>\n\t\t\t      Payout {platformFeesOwed/1000000000000000000} ETH\n\t\t\t    </DialogContentText>\n\t\t\t  </DialogContent>\n\t\t\t  <DialogActions>\n\t\t\t    <Button\n\t\t\t    onClick={handlePayoutPlatformFeeClose}\n\t\t\t    color=\"primary\">\n\t\t\t      Cancel\n\t\t\t    </Button>\n\t\t\t    <Button\n\t\t\t    onClick={(e) => handlePayoutPlatformFees(e)}\n\t\t\t    color=\"primary\">\n\t\t\t      Confirm\n\t\t\t    </Button>\n\t\t\t  </DialogActions>\n\t\t\t</Dialog>\n\n\t\t\t<br />\n\n\t\t\t<Button variant=\"outlined\" color=\"primary\" onClick={handleClickVerificationOpen}>\n\t\t\t  Verify a Token\n\t\t\t</Button>\n\t\t\t<Dialog\n\t\t\topen={verificationOpen}\n\t\t\tonClose={handleVerificationClose}\n\t\t\taria-labelledby=\"form-dialog-title\">\n\t\t\t  <DialogTitle id=\"form-dialog-title\">\n\t\t\t  Verify Token\n\t\t\t  </DialogTitle>\n\t\t\t  <DialogContent>\n\t\t\t    <DialogContentText>\n\t\t\t      Which token do you wish to verify?\n\t\t\t    </DialogContentText>\n\t\t\t    <TextField\n\t\t\t      autoFocus\n\t\t\t      margin=\"dense\"\n\t\t\t      id=\"name\"\n\t\t\t      label=\"Token\"\n\t\t\t      placeholder=\"0\"\n\t\t\t      type=\"number\"\n\t\t\t      fullWidth\n\t\t\t      onChange={(event) => {setCurrToken(event.target.value)}}\n\t\t\t    />\n\t\t\t  </DialogContent>\n\t\t\t  <DialogActions>\n\t\t\t    <Button\n\t\t\t    onClick={handleVerificationClose}\n\t\t\t    color=\"primary\">\n\t\t\t      Cancel\n\t\t\t    </Button>\n\t\t\t    <Button\n\t\t\t    onClick={(e) => handleChangeVerification(e, currToken)}\n\t\t\t    color=\"primary\">\n\t\t\t      Verify\n\t\t\t    </Button>\n\t\t\t  </DialogActions>\n\t\t\t</Dialog>\n\t\t</div>\n\t);\n}\n\nexport default OwnerDashboard;"]},"metadata":{},"sourceType":"module"}